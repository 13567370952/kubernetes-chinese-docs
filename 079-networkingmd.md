# 网络

Kubernetes网络需要解决下面四类不同的问题：

1. 高耦合容器和容器间通信
2. Pod和Pod间通信
3. Pod和Service间通信
4. 外部和内部通信


## 模型和动机
Kubernetes从默认的Docker网络模型中脱离出来（尽管和Docker 1.8的网络插件已经很接近了）。在一个共享网络命名空间的平面内，目标是一个pod一个IP，每个pod都可以和其它物理机或者容器实现跨网络通信。每个pod一个IP创建了一个简洁的，后向兼容的模型，在这个模型里，无论从哪个角度来看，包括端口分配，组网，命名，服务发现，负载均衡，应用配置和迁移，pod都可以被当作虚拟机或者物理主机。


另一方面，动态端口分配，要求同时支持静态端口（如对外部可接入的服务）和动态分配的端口；需要对中心型分配和本地获取动态端口做区分，复杂的调度（应为端口是稀缺资源）对用户来说是非常不方便的；复杂的应用配置，造成用户会被端口冲突、重用和耗尽所困扰；要求非标准的方式来命名（如consul和etcd而不是DNS）；需要代理或者重定向才能让程序使用标准的命名和寻址技术（如web浏览器）；如果还希望监控整个组成员的变化，并且阻碍容器或pod迁移（使用CRIU），就需要监控和缓存无效的地址和端口变化。其它问题中，NAT分隔地址空间引入了额外的复杂度，打破了自注册机制。




















































